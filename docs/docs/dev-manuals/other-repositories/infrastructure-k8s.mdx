# Kubernetes setup

The platform can be set up using the [infrastructure-k8s](https://github.com/MiSArch/infrastructure-k8s) repo.

## Technology Stack

- **Language**: HCL (Hashicorp configuration language)
- **Framework**: Terraform
- **Target**: Kubernetes Cluster

## Repository Structure

The repository is structured as follows:

<div className="repository-structure" >
- `/configmaps.tf`: Defines ConfigMaps used inside the cluster
- `/dapr.tf`: Sets up Dapr
- `/dbs.tf`: Sets up Postgres DBs for the cluster
- `/keycloak`: Keycloak submodule to grep the up to date MiSArch realm file
- `/keycloak.tf`: Sets up Keycloak
- `/latest-deployment.tfvars`: (optional, must be enabled (`-var-file="latest-deployment.tfvars"`)) Sets all used containers to the latest available version
- `/main.tf`: Sets up Terraform itself
- `/misarch-address.tf`: Sets up the Address deployment
- `/misarch-catalog.tf`: Sets up the Catalog deployment
- `/misarch-discount.tf`: Sets up the Discount deployment
- `/misarch-frontend.tf`: Sets up the Frontend
- `/misarch-gateway.tf`: Sets up the Gateway
- `/misarch-notification.tf`: Sets up the Notification deployment
- `/misarch-shipment.tf`: Sets up the Shipment deployment
- `/misarch-tax.tf`: Sets up the Tax deployment
- `/misarch-user.tf`: Sets up the User deployment
- `/otel.tf`: Sets up an Opentelemetry collector
- `/passwords.tf`: Defines passwords used by everything
- `/test-script.sh`: Script to avoid specifying variables prior to running `terraform apply`
- `/variables-annotations.tf`: Defines annotations for the platform and for each deployment
- `/variables-labels.tf`: Defines labels for the platform and for each deployment
- `/variables-misc.tf`: Defines variables that did not fit in any other category
- `/variables-urls.tf`: Defines under which URLs services can be found
- `/variables-versions.tf`: Defines the container versions
</div>
