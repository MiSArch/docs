# Kubernetes setup

The platform can be set up using the [infrastructure-k8s](https://github.com/MiSArch/infrastructure-k8s) repo.

## Technology Stack

- **Language**: HCL (Hashicorp configuration language)
- **Framework**: Terraform
- **Target**: Kubernetes Cluster

## Repository Structure

The repository is structured as follows:

<div className="repository-structure" >

- `/configmaps.tf`: Defines ConfigMaps used inside the cluster
- `/dapr.tf`: Sets up Dapr
- `/dbs-mongodb.tf`: Sets up Mongo DBs for the cluster
- `/dbs-postgres.tf`: Sets up Postgres DBs for the cluster
- `/influxdb.tf`: Sets up the InfluxDB used for storing Gatling Metrics of Experiments
- `/ingress.tf`: Sets up a central cluster ingress to access the cluster
- `/keycloak`: Keycloak submodule to grep the up to date MiSArch realm file
- `/keycloak.tf`: Sets up Keycloak
- `/latest-deployment.tfvars`: (optional, must be enabled (`-var-file="latest-deployment.tfvars"`)) Sets all used containers to the latest available version
- `/main.tf`: Sets up Terraform itself
- `/minio.tf`: Sets up minio
- `/misarch-address.tf`: Sets up the Address deployment
- `/misarch-catalog.tf`: Sets up the Catalog deployment
- `/misarch-chaostoolkit-executor.tf`: Sets up the Chaos Toolkit Executor deployment
- `/misarch-discount.tf`: Sets up the Discount deployment
- `/misarch-experiment-config-frontend.tf`: Sets up the Experiment Config Frontend deployment
- `/misarch-experiment-config.tf`: Sets up the Experiment Config deployment
- `/misarch-experiment-exectuor.tf`: Sets up the Experiment Executor deployment
- `/misarch-experiment-executor-frontend.tf`: Sets up the Experiment Executor Frontend deployment
- `/misarch-frontend.tf`: Sets up the Frontend
- `/misarch-gateway.tf`: Sets up the Gateway
- `/misarch-gatling-executor.tf`: Sets up the Gatling Executor deployment
- `/misarch-inventory.tf`: Sets up the Inventory deployment
- `/misarch-invoice.tf`: Sets up the Invoice deployment
- `/misarch-media.tf`: Sets up the Media deployment
- `/misarch-notification.tf`: Sets up the Notification deployment
- `/misarch-order.tf`: Sets up the Order deployment
- `/misarch-payment.tf`: Sets up the Payment deployment
- `/misarch-return.tf`: Sets up the Return deployment
- `/misarch-review.tf`: Sets up the Review deployment
- `/misarch-shipment.tf`: Sets up the Shipment deployment
- `/misarch-shoppingcart.tf`: Sets up the Shopping Cart deployment
- `/misarch-simulation.tf`: Sets up the Simulation deployment
- `/misarch-tax.tf`: Sets up the Tax deployment
- `/misarch-user.tf`: Sets up the User deployment
- `/misarch-wishlist.tf`: Sets up the Wishlist deployment
- `/otel.tf`: Sets up an OpenTelemetry collector
- `/passwords-mongodb.tf`: Defines passwords for MongoDBs used by the cluster
- `/passwords.tf`: Defines passwords used by everything
- `/rabbitmq.tf`: Sets up RabbitMQ
- `/test-script.sh`: Script to avoid specifying variables prior to running `terraform apply`
- `/variables-annotations.tf`: Defines annotations for the platform and for each deployment
- `/variables-labels.tf`: Defines labels for the platform and for each deployment
- `/variables-misc.tf`: Defines variables that did not fit in any other category
- `/variables-urls.tf`: Defines under which URLs services can be found
- `/variables-versions.tf`: Defines the container versions

</div>
